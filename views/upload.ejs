<!DOCTYPE html>
<html>
  <head>
    <title>Add Artwork</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'primary': {
                50: '#f0f4ff',
                100: '#e0e9ff',
                200: '#c7d7fe',
                300: '#a4bcfc',
                400: '#7b99f9',
                500: '#5a72f5',
                600: '#3b4feb',
                700: '#2c3ad8',
                800: '#2731ae',
                900: '#253088',
              },
            },
            animation: {
              'float': 'float 3s ease-in-out infinite',
              'bounce-soft': 'bounceSoft 0.6s ease-in-out',
              'scale-in': 'scaleIn 0.3s ease-out',
              'fade-out': 'fadeOut 0.3s ease-out'
            },
            keyframes: {
              float: {
                '0%, 100%': { transform: 'translateY(0)' },
                '50%': { transform: 'translateY(-10px)' }
              },
              bounceSoft: {
                '0%, 20%, 50%, 80%, 100%': { transform: 'translateY(0)' },
                '40%': { transform: 'translateY(-20px)' },
                '60%': { transform: 'translateY(-10px)' }
              },
              scaleIn: {
                '0%': { opacity: '0', transform: 'scale(0.9)' },
                '100%': { opacity: '1', transform: 'scale(1)' }
              },
              fadeOut: {
                '0%': { opacity: '1', transform: 'scale(1)' },
                '100%': { opacity: '0', transform: 'scale(0.9)' }
              }
            },
            backgroundImage: {
              'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
              'dotted-pattern': 'radial-gradient(circle, #e2e8f0 1px, transparent 1px)'
            },
            boxShadow: {
              'neomorphic': '10px 10px 20px #d1d9e6, -10px -10px 20px #ffffff',
              'neomorphic-sm': '5px 5px 10px #d1d9e6, -5px -5px 10px #ffffff',
            }
          }
        }
      }
    </script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
      
      * {
        font-family: 'Plus Jakarta Sans', sans-serif;
        scroll-behavior: smooth;
      }
      
      .bg-dotted-pattern {
        background-size: 20px 20px;
      }
      
      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
      }
      
      input[type="file"] {
        opacity: 0;
        position: absolute;
        width: 100%;
        height: 100%;
        cursor: pointer;
      }
      
      /* Button hover effect */
      .btn-hover-effect {
        position: relative;
        overflow: hidden;
      }
      
      .btn-hover-effect:after {
        content: "";
        background: rgba(255, 255, 255, 0.2);
        position: absolute;
        top: 50%;
        left: 50%;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
        transition: transform 0.5s, opacity 0.3s;
      }
      
      .btn-hover-effect:active:after {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
        transition: transform 0s, opacity 0.1s;
      }
      
      .custom-select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23475569' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
        background-position: right 1rem center;
        background-repeat: no-repeat;
        background-size: 1.5em;
      }
    </style>
  </head>
  <body class="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 relative py-12 px-4 sm:px-6 md:px-8">
    <!-- Decorative background elements -->
    <div class="fixed inset-0 z-0 bg-dotted-pattern opacity-40 pointer-events-none"></div>
    <div class="fixed top-32 -left-32 w-64 h-64 bg-primary-200/30 rounded-full filter blur-3xl opacity-30 animate-float pointer-events-none"></div>
    <div class="fixed bottom-32 -right-32 w-80 h-80 bg-purple-200/30 rounded-full filter blur-3xl opacity-30 animate-float delay-1000 pointer-events-none"></div>
    
    <!-- View Gallery Button -->
    <a href="/api/artworks/paintings" class="fixed top-6 right-6 z-50 bg-white shadow-lg hover:shadow-xl px-6 py-3 rounded-full group transition-all duration-300 transform hover:-translate-y-1">
      <div class="flex items-center gap-3">
        <span class="w-10 h-10 flex items-center justify-center rounded-full bg-gradient-to-r from-primary-500 to-purple-600 text-white text-lg group-hover:scale-110 transition-transform duration-300">
          🎨
        </span>
        <span class="font-semibold text-slate-800 group-hover:text-primary-600 transition-colors duration-300">View Gallery</span>
      </div>
    </a>

    <!-- Message Modal -->
    <% if (message && message.trim() !== '') { %>
    <div id="messageModal" class="fixed inset-0 flex items-center justify-center z-[1000] bg-slate-900/50 backdrop-blur-sm opacity-0 invisible transition-all duration-300">
      <div id="messageContent" class="bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden transform scale-90 transition-all duration-300">
        <div class="p-8 text-center">
          <div id="messageIcon" class="inline-flex items-center justify-center w-20 h-20 rounded-full mb-6 mx-auto"></div>
          <p id="messageText" class="text-xl font-medium text-slate-800"><%= message %></p>
        </div>
        <div class="bg-slate-50 px-8 py-4 flex justify-end">
          <button type="button" class="px-5 py-2 text-sm font-medium text-primary-600 hover:text-primary-800 transition-colors" onclick="closeModal()">Dismiss</button>
        </div>
      </div>
    </div>
    <% } %>

    <div class="max-w-4xl mx-auto relative z-10">
      <!-- Form Container -->
      <div class="bg-white rounded-[2.5rem] shadow-xl overflow-hidden border border-slate-200/70 backdrop-blur-sm">
        <!-- Header section -->
        <div class="px-8 pt-8 pb-6 md:px-10 md:pt-10">
          <div class="flex flex-col items-center mb-10">
            <div class="w-16 h-16 bg-gradient-to-r from-primary-500 to-purple-600 rounded-2xl flex items-center justify-center mb-6 shadow-lg transform -rotate-6">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary-600 to-purple-600 bg-clip-text text-transparent">Add New Artwork</h1>
            <p class="mt-2 text-slate-500 text-center max-w-lg">Create a new entry for your art collection with detailed information and image</p>
          </div>
        </div>

        <!-- Form content -->
        <form 
          id="artUploadForm" 
          action="/api/artworks" 
          method="POST" 
          enctype="multipart/form-data"
          class="px-8 py-6 md:px-10 bg-slate-50/80"
        >
          <!-- Basic Info Section -->
          <div class="mb-8">
            <h2 class="text-lg font-semibold text-slate-800 mb-6 flex items-center">
              <span class="inline-flex items-center justify-center w-7 h-7 rounded-full bg-primary-100 text-primary-600 mr-3 text-sm">1</span>
              Basic Information
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Title</label>
                <input 
                  type="text" 
                  name="title" 
                  required 
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800 placeholder-slate-400"
                />
              </div>
              
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Artist</label>
                <input 
                  type="text" 
                  name="artist" 
                  required 
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800 placeholder-slate-400"
                />
              </div>
              
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Year</label>
                <input 
                  type="text" 
                  name="year" 
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800 placeholder-slate-400"
                />
              </div>
              
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Catalog Number</label>
                <input 
                  type="text" 
                  name="catalogNumber" 
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800 placeholder-slate-400"
                />
              </div>
            </div>
          </div>

          <!-- Classification Section -->
          <div class="mb-8">
            <h2 class="text-lg font-semibold text-slate-800 mb-6 flex items-center">
              <span class="inline-flex items-center justify-center w-7 h-7 rounded-full bg-primary-100 text-primary-600 mr-3 text-sm">2</span>
              Classification
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Genre</label>
                <select 
                  name="genre" 
                  required 
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800 appearance-none custom-select"
                >
                  <% genres.forEach(function(genre) { %>
                  <option value="<%= genre %>"><%= genre %></option>
                  <% }); %>
                </select>
              </div>
              
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Medium</label>
                <select 
                  name="medium" 
                  required 
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800 appearance-none custom-select"
                >
                  <% mediums.forEach(function(medium) { %>
                  <option value="<%= medium %>"><%= medium %></option>
                  <% }); %>
                </select>
              </div>
              
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Dimensions</label>
                <input 
                  type="text" 
                  name="dimensions" 
                  placeholder="e.g., 77 cm × 53 cm" 
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800 placeholder-slate-400"
                />
              </div>
              
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Location</label>
                <input 
                  type="text" 
                  name="location" 
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800 placeholder-slate-400"
                />
              </div>
            </div>
          </div>

          <!-- Price & Display Section -->
          <div class="mb-8">
            <h2 class="text-lg font-semibold text-slate-800 mb-6 flex items-center">
              <span class="inline-flex items-center justify-center w-7 h-7 rounded-full bg-primary-100 text-primary-600 mr-3 text-sm">3</span>
              Price & Display Status
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Price</label>
                <input 
                  type="number" 
                  name="price" 
                  step="0.01" 
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800"
                />
              </div>
              
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Currency</label>
                <select 
                  name="priceCurrency" 
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800 appearance-none custom-select"
                >
                  <% currencies.forEach(function(currency) { %>
                  <option value="<%= currency %>"><%= currency %></option>
                  <% }); %>
                </select>
              </div>
              
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">On Display</label>
                <div class="flex items-center gap-4 h-[52px]">
                  <label class="inline-flex items-center">
                    <input type="radio" name="isOnDisplay" value="true" checked class="w-5 h-5 text-primary-600 bg-white border-slate-300 focus:ring-2 focus:ring-primary-200">
                    <span class="ml-2 text-slate-700">Yes</span>
                  </label>
                  <label class="inline-flex items-center">
                    <input type="radio" name="isOnDisplay" value="false" class="w-5 h-5 text-primary-600 bg-white border-slate-300 focus:ring-2 focus:ring-primary-200">
                    <span class="ml-2 text-slate-700">No</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Artwork Image Section -->
          <div class="mb-8">
            <h2 class="text-lg font-semibold text-slate-800 mb-6 flex items-center">
              <span class="inline-flex items-center justify-center w-7 h-7 rounded-full bg-primary-100 text-primary-600 mr-3 text-sm">4</span>
              Artwork Image
            </h2>
            
            <div class="space-y-6">
              <div class="relative group">
                <div class="overflow-hidden rounded-2xl border-2 border-dashed border-slate-300 bg-slate-100 transition-all group-hover:border-primary-400 group-hover:bg-slate-50">
                  <div class="relative p-6 text-center">
                    <svg class="mx-auto h-12 w-12 text-slate-400 group-hover:text-primary-500 transition-colors" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                      <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <div class="mt-4 flex flex-col sm:flex-row text-sm justify-center items-center text-slate-500">
                      <span id="fileUploadText" class="font-medium text-primary-600 hover:text-primary-500">
                        Click to upload
                      </span>
                      <span class="mt-1 sm:mt-0 sm:ml-2">or drag and drop</span>
                    </div>
                    <p class="mt-1 text-xs text-slate-500">PNG, JPG, GIF up to 10MB</p>
                  </div>
                  <input type="file" name="image" id="imageInput" accept="image/*" required class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
                </div>
              </div>

              <div class="flex justify-center">
                <img
                  id="preview"
                  src="#"
                  alt="Image preview..."
                  class="hidden max-h-80 rounded-xl shadow-lg border border-slate-200"
                />
              </div>
            </div>
          </div>

          <!-- Additional Details Section -->
          <div class="mb-8">
            <h2 class="text-lg font-semibold text-slate-800 mb-6 flex items-center">
              <span class="inline-flex items-center justify-center w-7 h-7 rounded-full bg-primary-100 text-primary-600 mr-3 text-sm">5</span>
              Additional Details
            </h2>
            
            <div class="space-y-6">
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Provenance</label>
                <input 
                  type="text" 
                  name="provenance" 
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800"
                />
              </div>
              
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Description</label>
                <textarea
                  name="description"
                  rows="4"
                  placeholder="Enter artwork description..."
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800 placeholder-slate-400 resize-y min-h-[100px]"
                ></textarea>
              </div>
              
              <div class="space-y-2">
                <label class="block text-sm font-semibold text-slate-700">Tags (comma-separated)</label>
                <input
                  type="text"
                  name="tags"
                  placeholder="abstract, contemporary, oil painting..."
                  class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-slate-800 placeholder-slate-400"
                />
              </div>
            </div>
          </div>

          <div class="pt-2 pb-6 text-center">
            <button 
              type="submit" 
              class="btn-hover-effect inline-flex items-center justify-center px-8 py-4 rounded-xl text-white font-semibold text-lg bg-gradient-to-r from-primary-600 to-purple-600 hover:from-primary-700 hover:to-purple-700 shadow-lg hover:shadow-xl transform transition-all duration-300 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
              </svg>
              Add Artwork
            </button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // Simple image preview logic
      const input = document.getElementById("imageInput");
      const preview = document.getElementById("preview");
      const fileUploadText = document.getElementById("fileUploadText");

      input.onchange = (evt) => {
        const [file] = input.files;
        if (file) {
          preview.src = URL.createObjectURL(file);
          preview.classList.remove("hidden");
          fileUploadText.textContent = `File: ${file.name}`;
        } else {
          preview.classList.add("hidden");
          fileUploadText.textContent = "Click to upload";
        }
      };

      // Message modal logic
      document.addEventListener("DOMContentLoaded", function () {
        const messageModal = document.getElementById("messageModal");
        const messageIcon = document.getElementById("messageIcon");
        const messageText = document.getElementById("messageText");

        if (messageModal) {
          const textContent = "<%= message %>";

          // Determine icon and class based on message content
          if (
            textContent.includes("successfully") ||
            textContent.includes("✅")
          ) {
            messageIcon.className = "animate-bounce-soft bg-emerald-100 text-emerald-600";
            messageIcon.innerHTML = `
              <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
            `;
          } else if (
            textContent.includes("Error") ||
            textContent.includes("❌") ||
            textContent.includes("already exists") ||
            textContent.includes("already been uploaded")
          ) {
            messageIcon.className = "animate-bounce-soft bg-red-100 text-red-600";
            messageIcon.innerHTML = `
              <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            `;
          } else {
            messageIcon.className = "animate-bounce-soft bg-blue-100 text-blue-600";
            messageIcon.innerHTML = `
              <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            `;
          }

          // Show modal
          setTimeout(() => {
            messageModal.classList.remove("opacity-0", "invisible");
            document.getElementById("messageContent").classList.remove("scale-90");
          }, 100);

          // Auto hide after 5000ms (5 seconds)
          setTimeout(() => {
            closeModal();
          }, 5000);
        }
      });
      
      function closeModal() {
        const messageModal = document.getElementById("messageModal");
        const messageContent = document.getElementById("messageContent");
        
        if (messageModal) {
          messageContent.classList.add("scale-90");
          messageModal.classList.add("opacity-0");
          
          setTimeout(() => {
            messageModal.classList.add("invisible");
          }, 300);
        }
      }
    </script>
  </body>
</html>